<%- layout('layouts/boilerplate') %>

<!-- prettier-ignore -->
<% if (player !== undefined) { %>
<form
  action="/players/<%=player.player_id%>/edit"
  method="post"
  novalidate
  onsubmit="return validateFormPlayer()"
>
  <div class="form-group my-2">
    <label for="input-name">Name:</label>
    <input
      class="form-control my-2"
      id="input-name"
      type="text"
      name="name"
      value="<%=player.name%>"
    />
    <p class="text-danger" id="p-error-name"></p>
    <label for="input-email">Email:</label>
    <input
      class="form-control my-2"
      id="input-email"
      type="text"
      name="email"
      value="<%=player.email%>"
    />
    <p class="text-danger" id="p-error-email"></p>
  </div>

  <h2>Game Specialisations</h2>
  <% if (gamespecialisations.length > 0 && games.length > 0) { %>
  <!-- prettier-ignore -->
  <ul>
    <% for (let i = 0; i < gamespecialisations.length; i++)  { %>
      <% for (let k= 0; k < games.length; k++) { %>
        <% if (gamespecialisations[i].game_id === games[k].game_id)  { %>
          <li><%= games[k].name %></li>
        <% } %>
      <% } %>
    <% } %>
  </ul>
  <% } else { %>
  <p><%=player.name %> has no Game specialisations</p>
  <% } %>

  <button class="btn btn-success my-2" type="submit">Submit</button>
</form>
<% } else { %>
<h1>There is no player with an id of "<%=id%>"</h1>
<% } %>

<script src="/scripts/validateFormPlayer.js"></script>
