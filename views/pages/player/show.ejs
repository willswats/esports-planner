<%- layout('layouts/boilerplate') %>

<% if (player !== undefined) { %>
<div class="card bg-secondary text-white mb-2" style="width: 100%">
  <ul class="list-group list-group-flush">
    <li class="list-group-item bg-secondary text-white">
      <p>Name:</p>
      <p class="list-group-item text-white bg-secondary my-2 rounded">
        <%= player.name %>
      </p>
    </li>

    <li class="list-group-item bg-secondary text-white">
      <p>Email:</p>
      <p class="list-group-item text-white bg-secondary my-2 rounded">
        <%=player.email%>
      </p>
    </li>

    <div class="list-group list-group-flush">
      <ul class="list-group-item bg-secondary text-white">
        <p>Game specialisations:</p>
        <% if (gamespecialisations.length > 0 && games.length > 0) { %>
        <% for (let i = 0; i < games.length; i++)  { %>
        <% for (let k = 0; k < gamespecialisations.length; k++) { %>
        <% if (games[i].game_id === gamespecialisations[k].game_id) { %>
        <li class="list-group-item bg-secondary text-white"><%= games[i].name %></li>
        <% } %>
        <% } %>
        <% } %>
        <% } else { %>
        <li class="list-group-item bg-secondary text-white rounded"><%=player.name %> does not have any specialisations.</li>
        <% } %>
      </ul>
    </div>
  </ul>
  <div class="card-body d-flex">
    <a class="btn btn-success me-1" href="/players/<%=player.player_id%>/edit">Edit</a>
    <form action="/players/<%=player.player_id%>/delete" method="post">
      <button class="btn btn-danger">Delete</button>
    </form>
  </div>
</div>
<% } else { %>
<div class="card bg-secondary" style="width: 100%">
  <div class="card-body">
    <h1>Error</h1>
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item bg-secondary text-white">
      <p class="list-group-item bg-secondary text-white my-1 rounded">There is no player with an id of "<%=id%>"</p>
    </li>
  </ul>
</div>
<% } %>